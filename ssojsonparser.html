<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SSO JSON Parser</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      padding: 20px;
      text-align: center;
      background-color: #f0f2f5;
      color: #333;
      transition: background-color 0.3s, color 0.3s;
    }
    body.dark-mode {
      background-color: #333;
      color: #f0f2f5;
    }
    h1, h3 {
      margin: 0 0 20px;
    }
    #drop-area {
      border: 2px dashed #6c757d;
      padding: 20px;
      margin: 20px auto;
      width: 100%;
      max-width: 1024px;
      height: 200px;
      line-height: 180px;
      color: #6c757d;
      background-color: rgba(255, 255, 255, 0.9);
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      border-radius: 10px;
      box-sizing: border-box;
      transition: background-color 0.3s, color 0.3s;
    }
    body.dark-mode #drop-area {
      color: #ccc;
      background-color: rgba(0, 0, 0, 0.9);
    }
    #output, #raw-json {
      display: none;
      margin-top: 20px;
      max-width: 1024px;
      margin: 20px auto;
      text-align: left;
      background-color: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      box-sizing: border-box;
      overflow-x: auto;
      transition: background-color 0.3s, color 0.3s;
    }
    body.dark-mode #output, body.dark-mode #raw-json {
      background-color: #444;
      color: #f0f2f5;
    }
    .field {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 10px 0;
      border-bottom: 1px solid #eee;
      padding-bottom: 5px;
      position: relative;
      flex-wrap: wrap;
      word-wrap: break-word;
    }
    body.dark-mode .field {
      border-bottom: 1px solid #555;
    }
    .field .fieldName {
      font-weight: bold;
      text-align: left;
      flex: 1;
      padding-right: 20px;
    }
    .field .value {
      text-align: right;
      flex: 2;
      word-wrap: break-word;
    }
    .checkmark {
      position: absolute;
      left: -17px;
      font-size: 20px;
      color: lightgreen;
      display: none;
      animation: fadeOut 2s forwards;
    }
    @keyframes fadeOut {
      0% { opacity: 1; }
      100% { opacity: 0; }
    }
    button {
      cursor: pointer;
      margin-right: 10px;
      padding: 5px 10px;
      background-color: #007bff;
      border: none;
      color: white;
      border-radius: 5px;
      transition: background-color 0.3s;
    }
    button:hover {
      background-color: #0056b3;
    }
    #raw-json {
      width: 100%;
      height: 200px;
      padding: 10px;
      background-color: #f8f9fa;
      border: 1px solid #ccc;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      resize: none;
      font-family: 'Courier New', Courier, monospace;
      box-sizing: border-box;
      transition: background-color 0.3s, color 0.3s;
    }
    body.dark-mode #raw-json {
      background-color: #333;
      border-color: #555;
      color: #f0f2f5;
    }
    .toggle-switch {
      position: fixed;
      top: 10px;
      right: 10px;
      width: 60px;
      height: 30px;
      background-color: #ccc;
      border-radius: 30px;
      display: flex;
      align-items: center;
      padding: 5px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .toggle-switch .toggle-thumb {
      width: 24px;
      height: 24px;
      background-color: #FFC344;
      border-radius: 50%;
      transition: transform 0.3s;
    }
    body.dark-mode .toggle-switch {
      background-color: #4d67da;
    }
    body.dark-mode .toggle-thumb {
      transform: translateX(32px);
      background-color: #c2cfdbf6;
      
    }
    .toggle-switch .icon {
      position: absolute;
      width: 24px;
      height: 24px;
      display: none;
    }
  </style>
</head>
<body>
  <h1>SSO JSON Parser</h1>
  <div id="drop-area">Drop JSON file here</div>
  <div id="output"></div>
  <textarea id="raw-json" readonly></textarea>
  <div id="toggle-dark-mode" class="toggle-switch">
    <div class="toggle-thumb"></div>
  </div>

  <script>
    const dropArea = document.getElementById('drop-area');
    const output = document.getElementById('output');
    const rawJson = document.getElementById('raw-json');
    const toggleDarkModeButton = document.getElementById('toggle-dark-mode');
    let dragCounter = 0;

    const fieldNames = {
      client_id: "Client ID",
      project_id: "Project ID",
      auth_uri: "Auth URI",
      token_uri: "Token URI",
      auth_provider_x509_cert_url: "Auth Provider Cert URL",
      client_secret: "Client Secret",
      redirect_uris: "Redirect URIs",
      javascript_origins: "JavaScript Origins"
    };

    function loadDarkModePreference() {
      const darkMode = localStorage.getItem('darkMode');
      if (darkMode === 'enabled') {
        document.body.classList.add('dark-mode');
      }
    }

    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
      if (document.body.classList.contains('dark-mode')) {
        localStorage.setItem('darkMode', 'enabled');
      } else {
        localStorage.setItem('darkMode', 'disabled');
      }
    }

    toggleDarkModeButton.addEventListener('click', toggleDarkMode);

    window.addEventListener('dragover', (event) => {
      event.preventDefault();
      dragCounter++;
      dropArea.style.display = 'block';
    });

    window.addEventListener('dragleave', (event) => {
      event.preventDefault();
      dragCounter--;
      if (dragCounter === 0) {
        dropArea.style.display = 'block';
      }
    });

    window.addEventListener('drop', (event) => {
      event.preventDefault();
      dragCounter = 0;

      const files = event.dataTransfer.files;
      if (files.length) {
        const file = files[0];
        if (file.type === 'application/json') {
          const reader = new FileReader();
          reader.onload = function(e) {
            const jsonData = JSON.parse(e.target.result);
            rawJson.value = JSON.stringify(jsonData, null, 2); // Pretty print JSON
            displayData(jsonData);
            dropArea.style.display = 'none';
            output.style.display = 'block';
            rawJson.style.display = 'block';
          };
          reader.readAsText(file);
        } else {
          alert('Please drop a JSON file.');
        }
      }
    });

    function displayData(data, parentKey = '') {
      output.innerHTML = '';
      const webData = data.web;
      for (const key in webData) {
        if (webData.hasOwnProperty(key)) {
          if (Array.isArray(webData[key])) {
            webData[key].forEach((item, index) => {
              addField(`${fieldNames[key]} [${index}]`, item);
            });
          } else {
            addField(fieldNames[key], webData[key]);
          }
        }
      }
    }

    function addField(displayName, value) {
      const fieldDiv = document.createElement('div');
      fieldDiv.className = 'field';

      const copyButton = document.createElement('button');
      copyButton.textContent = 'Copy';
      copyButton.addEventListener('click', () => {
        navigator.clipboard.writeText(value).then(() => {
          showCheckmark(fieldDiv);
        }).catch(err => {
          console.error('Failed to copy: ', err);
        });
      });

      const textField = document.createElement('span');
      textField.className = "fieldName";
      textField.textContent = `${displayName}: `;

      const valueField = document.createElement('span');
      valueField.textContent = value;
      valueField.className = "value";

      const checkmark = document.createElement('span');
      checkmark.className = 'checkmark';
      checkmark.innerHTML = '&#10003;'; // Checkmark character

      fieldDiv.appendChild(copyButton);
      fieldDiv.appendChild(textField);
      fieldDiv.appendChild(valueField);
      fieldDiv.appendChild(checkmark);
      output.appendChild(fieldDiv);
    }

    function showCheckmark(fieldDiv) {
      const checkmark = fieldDiv.querySelector('.checkmark');
      checkmark.style.display = 'inline';
      setTimeout(() => {
        checkmark.style.display = 'none';
      }, 1000);
    }

    loadDarkModePreference();
  </script>
</body>
</html>
